$(function(){$(".group-title").click(function(){var b=$(this).attr("groupTitle");var a=$(this).parent().find("ul."+b);var c=$(this).find("i.icon-caret");if(c.hasClass("icon-caret-up")){c.removeClass("icon-caret-up").addClass("icon-caret-down");c.next().html("显示");a.hide()}else{if(c.hasClass("icon-caret-down")){c.removeClass("icon-caret-down").addClass("icon-caret-up");c.next().html("隐藏");a.show();changeDownloadList(a)}}});$(".all-sel").click(function(){var a=$(this).parents("li").parent().find(".url-checkbox");if($(this).prop("checked")){a.prop("checked",true)}else{a.prop("checked",false)}});$(".url-checkbox").click(function(){var a=$(this).parents("li").parent();var b=true;a.find(".url-checkbox").each(function(){if(!$(this).prop("checked")){b=false;return false}});if(b){a.find(".all-sel").prop("checked",true)}else{a.find(".all-sel").prop("checked",false)}});$(".batch-download-a").click(function(){var v=$(this).parents("li").parent().find("li");var g=v.find(".url-checkbox");var l=new Array();var r=new Array();var e=new Array();var a=new Array();g.each(function(i){if($(this).prop("checked")){var h=$(this).parent().next("ul.download-btn");h.find("a").each(function(w){var u=$(this).attr("href");if(u.indexOf("ed2k")!=-1){r[i]=u}else{if(u.indexOf("thunder")!=-1){e[i]=u}else{if(u.indexOf("magnet")!=-1){a[i]=u}else{e[i]=u}}}if(typeof l[w]=="undefined"){if(u.indexOf("ed2k")!=-1){l[w]="ed2k"}else{if(u.indexOf("thunder")!=-1){l[w]="thunder"}else{if(u.indexOf("magnet")!=-1){l[w]="magnet"}else{l[w]="thunder"}}}}})}});var s=$("#batch-download-model .modal-header").find(".tools .order");var q=$("#batch-download-model .modal-body");q.html("");s.html("");var t=new Array();for(var n=0;n<l.length;n++){var b="first active";var p="",f="";if(l[n].indexOf("ed2k")!=-1){p="电驴链接";f="ed2k";t=r}else{if(l[n].indexOf("thunder")!=-1){p="迅雷下载";f="thunder";t=e}else{if(l[n].indexOf("magnet")!=-1){p="磁力链接";f="magnet";t=a}else{p="迅雷下载";f="thunder";t=e}}}if(n>0){b="middle-r"}if(l.length>1){if(n==l.length-1){b="last"}}var m='<li type-name="'+f+'" class="'+b+'"><a href="javascript:;" title="'+p+'">'+p+"</a></li>";s.html(s.html()+m);var k="";for(var j=0;j<t.length;j++){if(typeof t[j]!="undefined"){k=k+t[j]+"\r\n"}}var c="";if(n>0){c='style="display:none"'}q.html(q.html()+'<textarea type-name="'+f+'" class="download-txt-list"'+c+">"+k+"</textarea>");$("#batch-download-model textarea").on("focus",function(){$(this).select()})}var o=$(window).height()-230;$("#batch-download-model textarea").css("height",o);$("#batch-download-model .modal-dialog").css("margin-top",($(window).height()-o-120)/2);$("#batch-download-model").modal();var d=$("#batch-download-model .modal-header").find(".tools .order li");d.click(function(){d.removeClass("active");$(this).addClass("active");var h=$(this).attr("type-name");$("#batch-download-model .modal-body textarea").hide();$("#batch-download-model .modal-body textarea[type-name="+h+"]").show()})})});
